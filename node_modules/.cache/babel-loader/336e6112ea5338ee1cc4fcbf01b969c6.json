{"ast":null,"code":"import _objectSpread from\"C:/Users/vened/Desktop/Weather/my_weather/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/vened/Desktop/Weather/my_weather/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/vened/Desktop/Weather/my_weather/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./UserPanel.css';import Axios from'axios';import UserWeatherItem from'./UserWeatherItem';import{Link}from'react-router-dom';import{useForm}from'react-hook-form';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserPanel(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Lid=_useState2[0],setLid=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var onSubmit=function onSubmit(values){Axios.post('https://weather-mysql-deploy.herokuapp.com/api/insert',{cityName:values.cityName,date:values.date,time:values.time,weatherState:values.weatherState,temp:values.temp,clouds:values.clouds,humidity:values.humidity,pressure:values.pressure,wind:values.wind,aqi:values.aqi});setcityWeatherList([].concat(_toConsumableArray(cityWeatherList),[{cityName:values.cityName,date:values.date,time:values.time,weatherState:values.weatherState,temp:values.temp,clouds:values.clouds,humidity:values.humidity,pressure:values.pressure,wind:values.wind,aqi:values.aqi}]));window.location.reload(false);};var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cityWeatherList=_useState4[0],setcityWeatherList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),property=_useState6[0],setProperty=_useState6[1];Axios.defaults.withCredentials=true;var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),loginStatus=_useState8[0],setLoginStatus=_useState8[1];console.log(loginStatus);useEffect(function(){Axios.get('https://weather-mysql-deploy.herokuapp.com/api/login').then(function(response){if(response.data.loggedIn===true){setLoginStatus(response.data.user[0].username);console.log(response);}else{console.log(response);setLoginStatus(\"unlogged\");}});Axios.get('https://weather-mysql-deploy.herokuapp.com/api/get').then(function(response){setcityWeatherList(response.data);setProperty(response.data[0]);console.log(response);console.log(\"PropertyGet:\",property);if(response.data==\"\"){alert(\"Błąd servera - offline\");}});setLid(0);setProperty(cityWeatherList[Lid]);},[]);var deleteWeather=function deleteWeather(id){console.log(id);Axios.post('https://weather-mysql-deploy.herokuapp.com/api/delete',{id:id});window.location.reload(false);console.log(\"USUNIETO\");};var logout=function logout(){Axios.post('https://weather-mysql-deploy.herokuapp.com/api/logout').then(function(response){console.log(response);if(response.data.message){setLoginStatus(\"logged\");}else{setLoginStatus(\"unlogged\");}});Axios.get('https://weather-mysql-deploy.herokuapp.com/api/logout').then(function(response){if(response.data.loggedIn===false){console.log(response);setLoginStatus(\"unlogged\");}else{setLoginStatus(\"logged\");console.log(response);}});window.location.reload(false);};var nextProperty=function nextProperty(){var newIndex=Lid+1;setLid(Lid+1);setProperty(cityWeatherList[newIndex]);console.log(\"New index:\",newIndex);console.log(\"Property:\",property);};var prevProperty=function prevProperty(){var newIndex=Lid-1;setLid(Lid-1);setProperty(cityWeatherList[newIndex]);console.log(\"New index:\",newIndex);console.log(\"Property:\",property);};if(loginStatus!==\"unlogged\"){return/*#__PURE__*/_jsxs(\"div\",{className:\"hero2\",style:{backgroundImage:\"url(\\\"/images/bg_signUp.jpg\\\")\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-box2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-input-group2\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[\"Miejsce\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",name:\"message\",maxLength:\"20\",className:\"input-field2\",placeholder:\"Miejsce\",required:true},register(\"cityName\",{required:\"Required\"}))),\"Data\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"date\",className:\"input-field2\",placeholder:\"Data\",required:true},register(\"date\",{required:\"Required\"}))),\"Godzina\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"time\",className:\"input-field2\",placeholder:\"Godzina\",required:true},register(\"time\",{required:\"Required\"}))),\"Pogoda\",/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"weatherState\",{required:\"Required\"})),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"Czyste Niebo\",children:\"Czyste Niebo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Lekkie Zachmurzenie\",children:\"Lekkie Zachmurzenie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Zachmurzenie\",children:\"Zachmurzenie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Du\\u017Ce Zachmurzenie\",children:\"Du\\u017Ce Zachmurzenie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Przeja\\u015Bnienia\",children:\"Przeja\\u015Bnienia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Lekki deszcz\",children:\"Lekki deszcz\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Deszcz\",children:\"Deszcz\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Burza\",children:\"Burza\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u015Anieg\",children:\"\\u015Anieg\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mg\\u0142a\",children:\"Mg\\u0142a\"})]})),/*#__PURE__*/_jsx(\"td\",{}),\"Temperatura\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"-90\",max:\"60\",className:\"input-field2\",placeholder:\"Temperatura (\\xB0C)\",required:true},register(\"temp\",{required:\"Required\"}))),\"Zachmurzenie\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"0\",max:\"100\",className:\"input-field2\",placeholder:\"Zachmurzenie (%)\",required:true},register(\"clouds\",{required:\"Required\"}))),\"Wilgotno\\u015B\\u0107\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"0\",max:\"100\",className:\"input-field2\",placeholder:\"Wilgotno\\u015B\\u0107\",required:true},register(\"humidity\",{required:\"Required\"}))),\"Ci\\u015Bnienie\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"850\",max:\"1100\",className:\"input-field2\",placeholder:\"Ci\\u015Bnienie (hPa)\",required:true},register(\"pressure\",{required:\"Required\"}))),\"Wiatr\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"0\",max:\"500\",className:\"input-field2\",placeholder:\"Wiatr (km/h)\",required:true},register(\"wind\",{required:\"Required\"}))),\"Jako\\u015B\\u0107 powietrza\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"1\",max:\"5\",className:\"input-field2\",placeholder:\"Jako\\u015B\\u0107 powietrza (1-5)\"},register(\"aqi\",{required:\"Required\"}))),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"submit-btn2\",value:\"Dodaj\"}),errors.message&&errors.message.message,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn2\",onClick:logout,children:\" Wyloguj \"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"user-main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-cards\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"left\",style:{backgroundImage:\"url(\\\"/images/arrow_left.png\\\")\"},onClick:function onClick(){return nextProperty();},disabled:Lid===cityWeatherList.length-1}),/*#__PURE__*/_jsx(\"button\",{className:\"right\",style:{backgroundImage:\"url(\\\"/images/arrow_right.png\\\")\"},onClick:function onClick(){return prevProperty();},disabled:Lid===0}),/*#__PURE__*/_jsx(\"div\",{className:\"main-cards\",children:/*#__PURE__*/_jsx(\"div\",{className:\"userCards-slider\",children:property?/*#__PURE__*/_jsx(\"div\",{className:\"userCards-slider-wrapper\",style:{'transform':\"translateX(-\".concat(Lid*(100/cityWeatherList.length),\"%)\")},children:cityWeatherList.map(function(fde){return/*#__PURE__*/_jsx(UserWeatherItem,{element:fde,deleteW:deleteWeather});})}):null})})]})})]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"hero\",style:{backgroundImage:\"url(\\\"/images/bg_signUp.jpg\\\")\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-input-group\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Musisz by\\u0107 zalogowanym aby korzysta\\u0107 z tej funkcji.\"}),/*#__PURE__*/_jsx(Link,{to:\"/sign-up\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\" Zaloguj \"})})]})})});}}export default UserPanel;","map":{"version":3,"sources":["C:/Users/vened/Desktop/Weather/my_weather/client/src/components/UserPanel/UserPanel.js"],"names":["React","useState","useEffect","Axios","UserWeatherItem","Link","useForm","UserPanel","Lid","setLid","register","handleSubmit","errors","formState","onSubmit","values","post","cityName","date","time","weatherState","temp","clouds","humidity","pressure","wind","aqi","setcityWeatherList","cityWeatherList","window","location","reload","property","setProperty","defaults","withCredentials","loginStatus","setLoginStatus","console","log","get","then","response","data","loggedIn","user","username","alert","deleteWeather","id","logout","message","nextProperty","newIndex","prevProperty","backgroundImage","required","length","map","fde"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './UserPanel.css';\r\nimport Axios from 'axios';\r\nimport UserWeatherItem from './UserWeatherItem';\r\nimport {Link} from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\n\r\nfunction UserPanel()\r\n{\r\n\r\n    const [Lid, setLid] = useState('');\r\n\r\n    const { register, handleSubmit, formState: { errors }} = useForm();\r\n  const onSubmit = (values) => {\r\n    Axios.post('https://weather-mysql-deploy.herokuapp.com/api/insert',\r\n        {\r\n            cityName:values.cityName,\r\n            date:values.date,\r\n            time:values.time,\r\n            weatherState:values.weatherState,\r\n            temp:values.temp,\r\n            clouds:values.clouds,\r\n            humidity:values.humidity,\r\n            pressure:values.pressure,\r\n            wind:values.wind,\r\n            aqi:values.aqi\r\n        });\r\n        setcityWeatherList([...cityWeatherList,{\r\n            cityName:values.cityName,\r\n            date:values.date,\r\n            time:values.time,\r\n            weatherState:values.weatherState,\r\n            temp:values.temp,\r\n            clouds:values.clouds,\r\n            humidity:values.humidity,\r\n            pressure:values.pressure,\r\n            wind:values.wind,\r\n            aqi:values.aqi\r\n        },]);\r\n        window.location.reload(false);\r\n  };\r\n\r\n\r\n    const [cityWeatherList, setcityWeatherList] = useState([]);\r\n    const [property, setProperty] = useState([]);\r\n\r\n    Axios.defaults.withCredentials = true;\r\n\r\n    const [loginStatus, setLoginStatus] = useState('');\r\n    console.log(loginStatus);\r\n\r\n   \r\n    useEffect(()=>\r\n    {\r\n        Axios.get('https://weather-mysql-deploy.herokuapp.com/api/login').then((response)=>\r\n        {\r\n            if(response.data.loggedIn===true)\r\n            {\r\n                setLoginStatus(response.data.user[0].username);\r\n                console.log(response);\r\n            }else\r\n            {\r\n                console.log(response);\r\n                setLoginStatus(\"unlogged\");\r\n            }\r\n        });\r\n\r\n        Axios.get('https://weather-mysql-deploy.herokuapp.com/api/get')\r\n        .then((response)=>\r\n        {\r\n            \r\n                setcityWeatherList(response.data);\r\n                setProperty(response.data[0]);\r\n                console.log(response);\r\n                console.log(\"PropertyGet:\",property);\r\n            \r\n            if(response.data==\"\"){\r\n                alert(\"Błąd servera - offline\")\r\n            }\r\n            \r\n        });\r\n        \r\n        setLid(0);\r\n        setProperty(cityWeatherList[Lid]);\r\n    },[])\r\n\r\n    const deleteWeather = (id) =>\r\n    {\r\n        console.log(id);\r\n        Axios.post('https://weather-mysql-deploy.herokuapp.com/api/delete',\r\n        {\r\n            id:id\r\n        });\r\n        \r\n        window.location.reload(false);\r\n        \r\n        console.log(\"USUNIETO\");\r\n    }\r\n    const logout = () =>\r\n    {\r\n        Axios.post('https://weather-mysql-deploy.herokuapp.com/api/logout')\r\n            .then((response) =>\r\n            {\r\n            console.log(response);\r\n            if(response.data.message)\r\n            {\r\n                setLoginStatus(\"logged\");\r\n            }else\r\n            {\r\n                setLoginStatus(\"unlogged\");\r\n            }\r\n        })\r\n        Axios.get('https://weather-mysql-deploy.herokuapp.com/api/logout').then((response)=>\r\n        {\r\n            if(response.data.loggedIn===false)\r\n            {\r\n                console.log(response);\r\n                setLoginStatus(\"unlogged\");\r\n            }else\r\n            {\r\n                setLoginStatus(\"logged\");\r\n                console.log(response);\r\n            }\r\n        })\r\n        window.location.reload(false);\r\n    }\r\n    const nextProperty = () => \r\n    {\r\n        const newIndex = Lid+1;\r\n        setLid(Lid+1);\r\n        setProperty(cityWeatherList[newIndex]);\r\n\r\n        console.log(\"New index:\",newIndex);\r\n        console.log(\"Property:\",property);\r\n    }\r\n    \r\n    const prevProperty = () => \r\n    {\r\n        const newIndex = Lid-1;\r\n        setLid(Lid-1);\r\n        setProperty(cityWeatherList[newIndex]);\r\n        console.log(\"New index:\",newIndex);\r\n        console.log(\"Property:\",property);\r\n    }\r\n    if(loginStatus!==\"unlogged\")\r\n    {\r\n        return(\r\n            <div className=\"hero2\"  style={\r\n                                    { \r\n                                        backgroundImage: `url(\"/images/bg_signUp.jpg\")` \r\n                                    }\r\n            }>\r\n                <div className=\"form-box2\">\r\n                    <div className=\"login-input-group2\">\r\n                    <form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n\r\n                        Miejsce\r\n                        <input type=\"text\" name = \"message\" maxLength=\"20\" className=\"input-field2\" placeholder=\"Miejsce\" required \r\n                        {...register(\"cityName\", {\r\n                            required: \"Required\",\r\n                        })}\r\n                        />\r\n                        Data\r\n                        <input type=\"date\" className=\"input-field2\" placeholder=\"Data\" required \r\n                        {...register(\"date\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Godzina\r\n                        <input type=\"time\" className=\"input-field2\" placeholder=\"Godzina\" required \r\n                        {...register(\"time\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Pogoda\r\n                        <td></td>\r\n                        <select {...register(\"weatherState\", {\r\n                            required: \"Required\",\r\n                        })}>\r\n                                <option value=\"Czyste Niebo\">Czyste Niebo</option>\r\n                                <option value=\"Lekkie Zachmurzenie\">Lekkie Zachmurzenie</option>\r\n                                <option value=\"Zachmurzenie\">Zachmurzenie</option>\r\n                                <option value=\"Duże Zachmurzenie\">Duże Zachmurzenie</option>\r\n                                <option value=\"Przejaśnienia\">Przejaśnienia</option>\r\n                                <option value=\"Lekki deszcz\">Lekki deszcz</option>\r\n                                <option value=\"Deszcz\">Deszcz</option>\r\n                                <option value=\"Burza\">Burza</option>\r\n                                <option value=\"Śnieg\">Śnieg</option>\r\n                                <option value=\"Mgła\">Mgła</option>\r\n                        </select>\r\n                        <td></td>\r\n                        Temperatura\r\n                        <input type=\"number\" min=\"-90\" max=\"60\" className=\"input-field2\" placeholder=\"Temperatura (°C)\" required \r\n                        {...register(\"temp\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Zachmurzenie\r\n                        <input type=\"number\" min=\"0\" max=\"100\" className=\"input-field2\" placeholder=\"Zachmurzenie (%)\" required \r\n                        {...register(\"clouds\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Wilgotność\r\n                        <input type=\"number\" min=\"0\" max=\"100\" className=\"input-field2\" placeholder=\"Wilgotność\" required \r\n                        {...register(\"humidity\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Ciśnienie\r\n                        <input type=\"number\" min=\"850\" max=\"1100\" className=\"input-field2\" placeholder=\"Ciśnienie (hPa)\" required \r\n                        {...register(\"pressure\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Wiatr\r\n                        <input type=\"number\" min=\"0\" max=\"500\" className=\"input-field2\" placeholder=\"Wiatr (km/h)\" required \r\n                        {...register(\"wind\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        Jakość powietrza\r\n                        <input type=\"number\" min=\"1\" max=\"5\" className=\"input-field2\" placeholder=\"Jakość powietrza (1-5)\" \r\n                        {...register(\"aqi\", {\r\n                            required: \"Required\",\r\n                        })}/>\r\n                        <input type=\"submit\" className=\"submit-btn2\" value=\"Dodaj\"/> \r\n                        {errors.message && errors.message.message}\r\n                        <button type=\"submit\" className=\"submit-btn2\" onClick={logout}> Wyloguj </button>\r\n                        </form>\r\n                    </div>\r\n                </div>   \r\n                <div className=\"user-main\">\r\n                \r\n                    <div className=\"user-cards\">\r\n                        <button className=\"left\"    style={\r\n                                                                { \r\n                                                                backgroundImage: `url(\"/images/arrow_left.png\")` \r\n                                                                }}\r\n                                                                onClick={() => nextProperty()} \r\n                                                                disabled={Lid === cityWeatherList.length-1}\r\n                                    >\r\n                                    </button>\r\n                                    <button className=\"right\"   style={\r\n                                                                { \r\n                                                                    backgroundImage: `url(\"/images/arrow_right.png\")` \r\n                                                                }}\r\n                                                                onClick={() => prevProperty()} \r\n                                                                disabled={Lid === 0}\r\n                                        >\r\n                                    </button>\r\n                        <div className=\"main-cards\">\r\n                            <div className=\"userCards-slider\">\r\n                            {property ?(\r\n                                <div className=\"userCards-slider-wrapper\"   style={\r\n                                                                            {\r\n                                                                                'transform':`translateX(-${Lid*(100/cityWeatherList.length)}%)`\r\n                                                                            }\r\n                                }>\r\n                                    {cityWeatherList.map(fde => <UserWeatherItem element={fde} deleteW={deleteWeather}/>)}\r\n                                </div>\r\n                                ):null}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                \r\n                </div> \r\n            </div>\r\n        )\r\n    }else{\r\n        return(\r\n            <div className=\"hero\"   style={\r\n                                    { \r\n                                        backgroundImage: `url(\"/images/bg_signUp.jpg\")` \r\n                                    }\r\n            }>\r\n                <div className=\"form-box\">\r\n                    <div className=\"login-input-group\" >\r\n                        <h1>Musisz być zalogowanym aby korzystać z tej funkcji.</h1>\r\n                        <Link to='/sign-up'><button type=\"submit\" className=\"submit-btn\"> Zaloguj </button></Link>\r\n                    </div>\r\n                </div>   \r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default UserPanel;"]},"metadata":{},"sourceType":"module"}